<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:VsCodeDebugGen.Desktop.ViewModels"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="350"
        x:Class="VsCodeDebugGen.Desktop.Views.Dialogs.TemplateEditDialog"
        x:DataType="vm:TemplateEditDialogViewModel"
        Title="{Binding Title}"
        Width="500"
        Height="350"
        MinWidth="400"
        MinHeight="300"
        WindowStartupLocation="CenterOwner"
        CanResize="False">

    <Design.DataContext>
        <vm:TemplateEditDialogViewModel />
    </Design.DataContext>

    <Grid RowDefinitions="*,Auto" Margin="16">

        <!-- 内容区域 -->
        <Border Grid.Row="0"
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="4"
                Padding="16">

            <StackPanel Spacing="16">

                <!-- 模板名称 -->
                <StackPanel Spacing="4">
                    <TextBlock Text="模板名称"
                               Classes="BodyTextBlock"
                               FontWeight="SemiBold" />
                    <TextBox Text="{Binding TemplateName}"
                             Watermark="请输入模板名称"
                             MaxLength="100" />
                    <TextBlock Text="{Binding NameError}"
                               Classes="CaptionTextBlock"
                               Foreground="{StaticResource SystemErrorColor}"
                               IsVisible="{Binding NameError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                </StackPanel>

                <!-- 模板描述 -->
                <StackPanel Spacing="4">
                    <TextBlock Text="模板描述"
                               Classes="BodyTextBlock"
                               FontWeight="SemiBold" />
                    <TextBox Text="{Binding TemplateDescription}"
                             Watermark="请输入模板描述（可选）"
                             MaxLength="500"
                             Height="120"
                             AcceptsReturn="True"
                             TextWrapping="Wrap"
                             VerticalAlignment="Top" />
                    <TextBlock Text="{Binding DescriptionError}"
                               Classes="CaptionTextBlock"
                               Foreground="{StaticResource SystemErrorColor}"
                               IsVisible="{Binding DescriptionError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                </StackPanel>

                <!-- 提示信息 -->
                <Border Background="{StaticResource CardBackgroundBrush}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="4"
                        Padding="12">
                    <StackPanel Spacing="4">
                        <TextBlock Text="提示"
                                   Classes="CaptionTextBlock"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextSecondaryBrush}" />
                        <TextBlock Classes="CaptionTextBlock"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   TextWrapping="Wrap">
                            <Run Text="• 模板名称长度: 1-100 个字符" />
                            <LineBreak />
                            <Run Text="• 模板描述长度: 最多 500 个字符" />
                        </TextBlock>
                    </StackPanel>
                </Border>

            </StackPanel>

        </Border>

        <!-- 底部按钮 -->
        <Border Grid.Row="1"
                Background="{StaticResource CardBackgroundBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,1,0,0"
                Padding="0,16,0,0">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Spacing="8">

                <Button Content="确定"
                        Command="{Binding OkCommand}"
                        Classes="PrimaryButton"
                        Width="100"
                        IsDefault="True">
                    <Button.IsEnabled>
                        <Binding Path="!HasErrors" />
                    </Button.IsEnabled>
                </Button>

                <Button Content="取消"
                        Command="{Binding CancelCommand}"
                        Classes="SecondaryButton"
                        Width="100"
                        IsCancel="True" />

            </StackPanel>
        </Border>

    </Grid>

</Window>
